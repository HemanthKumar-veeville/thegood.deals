import{q as w,s as b,r as n,a as f,j as e,L as j,v as S,k,E,w as N,u as _}from"./index-BdE36W7t.js";import{L as p}from"./line-63-BwS0eOFc.js";function I({heading:i,btnText:l}){const o=w(),t=b(),[r,a]=n.useState(null),[x,s]=n.useState(!1),[h,y]=n.useState("avisihks@gmail.com"),{t:g}=f(),u=async m=>{if(m.preventDefault(),!(!o||!t)){s(!0);try{const{setupIntent:d,error:c}=await o.confirmSetup({elements:t,confirmParams:{},redirect:"if_required"});c?(c.type==="card_error"||c.type==="validation_error"?a(c.message):a("An unexpected error occurred."),console.error("Error during setup confirmation:",c)):(console.log("SetupIntent confirmed:",d),a("Setup confirmed successfully."))}catch(d){console.error("Error in setup confirmation:",d),a("An error occurred during setup confirmation.")}finally{s(!1)}}},v={layout:{type:"accordion",defaultCollapsed:!1,radios:!1,spacedAccordionItems:!0},appearance:{theme:"flat",variables:{colorPrimaryText:"#262626",colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#df1b41",fontFamily:"Ideal Sans, system-ui, sans-serif",spacingUnit:"2px",borderRadius:"4px"}}};return e.jsxs("form",{id:"payment-form",onSubmit:u,className:"mx-auto",children:[e.jsx(j,{id:"link-authentication-element",onChange:m=>{y(m.value.email)},options:{defaultValues:{email:h}}}),e.jsx(S,{id:"payment-element",options:v}),r&&e.jsx("div",{id:"payment-message",children:r}),e.jsx("img",{className:"relative self-stretch w-full h-px object-cover",alt:g("withdrawal.line_alt"),src:p}),e.jsxs("div",{className:"flex items-center justify-center gap-2.5 px-6 py-3 relative self-stretch w-full flex-[0_0_auto] bg-primary-color rounded-md cursor-pointer",onClick:u,children:[e.jsx("button",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-white text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:l}),e.jsx(k,{className:"!relative !w-5 !h-5",color:"white"})]})]})}function P({heading:i,btnText:l,...o}){const{stripePromise:t}=o,[r,a]=n.useState("");return n.useEffect(()=>{(async()=>{try{const{data:s}=await N.post("http://localhost:5000/payments/create-setup-intent");console.log(s),a(s.clientSecret)}catch(s){console.error("Error creating PaymentIntent:",s)}})()},[]),e.jsx(e.Fragment,{children:r&&t&&e.jsx(E,{stripe:t,options:{clientSecret:r},children:e.jsx(I,{heading:i,btnText:l})})})}const A=({heading:i,btnText:l,stripePromise:o})=>{n.useState(!1);const t=_(),{t:r}=f(),a=()=>{t(l==="Validate payment"?"/admin-view-deal":"/admin-wallet")};return n.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx("div",{className:"flex flex-col w-full h-full items-start relative bg-primary-background mx-auto",children:e.jsxs("div",{className:"flex flex-col w-full items-start gap-[15px] px-[35px] py-[15px] relative flex-[0_0_auto]",children:[e.jsx("div",{className:"relative self-stretch mt-[-1.00px] [font-family:'Inter',Helvetica] font-semibold text-primary-color text-2xl tracking-[0] leading-[30px]",children:i}),e.jsx(P,{stripePromise:o,heading:i,btnText:l}),e.jsx("img",{className:"relative self-stretch w-full h-px object-cover",alt:r("withdrawal.line_alt"),src:p}),e.jsx("button",{className:"all-[unset] box-border flex items-center justify-center gap-2 px-6 py-3 relative self-stretch w-full flex-[0_0_auto] rounded-md border border-solid border-primary-color cursor-pointer",onClick:a,children:e.jsx("div",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-primary-color text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:r("withdrawal.back_button")})})]})})};export{A as default};
