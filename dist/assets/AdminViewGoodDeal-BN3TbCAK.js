import{j as e,P,a as H,r as w,c as I,u as B,L as m,S as D,av as V,aw as q,l as A,d as Z,ag as b,C as F,A as z,Y as E,n as T,ax as C,Z as R,ao as U,ai as $,ad as G}from"./index-Bvyf-SBd.js";import"./Badges-B3SnhnQH.js";import{B as k}from"./Box43-DwijWqON.js";import{P as O}from"./Pencil-PQcUNqBQ.js";import{U as Y}from"./Users2-Cau5MUkH.js";import{P as Q,a as J}from"./ProgressBarGreen-B_yrcWnE.js";import{S as K}from"./Send1-CMXpIrNX.js";const W=({className:s})=>e.jsx("svg",{className:`${s}`,fill:"none",height:"20",viewBox:"0 0 21 20",width:"21",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18.875 9.28125C18.75 9.0625 18.5625 8.90625 18.3437 8.78125L3.93747 0.718748C3.68747 0.593748 3.40622 0.531248 3.12497 0.562498C2.84372 0.593748 2.59372 0.687498 2.37497 0.874998C2.15622 1.0625 1.99997 1.3125 1.93747 1.5625C1.84372 1.84375 1.87497 2.125 1.96872 2.40625L4.65622 10L1.96872 17.5937C1.87497 17.875 1.87497 18.1562 1.93747 18.4062C1.99997 18.6875 2.15622 18.9062 2.37497 19.0937C2.59372 19.2812 2.84372 19.375 3.12497 19.4062C3.15622 19.4062 3.21872 19.4062 3.24997 19.4062C3.46872 19.4062 3.71872 19.3437 3.93747 19.2187L18.3437 11.1562C18.5625 11.0312 18.75 10.875 18.875 10.6562C19 10.4375 19.0625 10.1875 19.0625 9.96875C19.0625 9.75 19 9.5 18.875 9.28125ZM3.31247 1.96875L16.375 9.28125H5.90622L3.31247 1.96875ZM3.31247 18.0312L5.93747 10.7187H16.4062L3.31247 18.0312Z",fill:"#1B4F4A"})}),L=({color:s="#111928",className:o})=>e.jsx("svg",{className:`${o}`,fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18.1563 0.999962C18.0313 0.624962 17.625 0.437462 17.25 0.593712L14.9688 1.43746C14.6875 1.53121 14.5 1.81246 14.5 2.09371V5.53121H3.9375C2.78125 5.53121 1.8125 6.46871 1.8125 7.65621V11.0625C1.8125 12.1562 2.6875 13.0937 3.78125 13.1875L14.5 14V14.2187C14.5 14.75 14.0625 15.1875 13.5313 15.1875H4.71875C3.53125 15.1875 2.5625 16.1562 2.5625 17.3437C2.5625 18.5312 3.53125 19.5 4.71875 19.5C5.90625 19.5 6.875 18.5312 6.875 17.3437C6.875 17.0937 6.8125 16.8125 6.75 16.5937H9.875C9.78125 16.8437 9.75 17.0937 9.75 17.3437C9.75 18.5312 10.7188 19.5 11.9063 19.5C13.0938 19.5 14.0625 18.5312 14.0625 17.3437C14.0625 17.0625 14 16.8125 13.9063 16.5625C15.0313 16.375 15.9063 15.4062 15.9063 14.2187V2.62496L17.75 1.96871C18.0938 1.78121 18.2813 1.37496 18.1563 0.999962ZM14.5 12.5625L3.875 11.7812C3.5 11.75 3.21875 11.4375 3.21875 11.0625V7.62496C3.21875 7.21871 3.53125 6.90621 3.9375 6.90621H14.5V12.5625ZM5.46875 17.2812C5.46875 17.6875 5.125 18.0312 4.71875 18.0312C4.3125 18.0312 3.96875 17.6875 3.96875 17.2812C3.96875 16.875 4.3125 16.5312 4.71875 16.5312C5.125 16.5312 5.46875 16.875 5.46875 17.2812ZM11.875 18.0625C11.4688 18.0625 11.125 17.7187 11.125 17.3125C11.125 16.9062 11.4688 16.5625 11.875 16.5625C12.2813 16.5625 12.625 16.9062 12.625 17.3125C12.625 17.7187 12.3125 18.0625 11.875 18.0625Z",fill:s})});L.propTypes={color:P.string};const X=({className:s})=>e.jsxs("svg",{className:`${s}`,fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{clipPath:"url(#clip0_1153_3180)",children:e.jsx("path",{d:"M11.2501 6.09736H6.43135V1.25986C6.43135 1.03486 6.24385 0.828613 6.0001 0.828613C5.7751 0.828613 5.56885 1.01611 5.56885 1.25986V6.09736H0.750098C0.525098 6.09736 0.318848 6.28486 0.318848 6.52861C0.318848 6.75361 0.506348 6.95986 0.750098 6.95986H5.5876V11.7599C5.5876 11.9849 5.7751 12.1911 6.01885 12.1911C6.24385 12.1911 6.4501 12.0036 6.4501 11.7599V6.94111H11.2501C11.4751 6.94111 11.6813 6.75361 11.6813 6.50986C11.6813 6.28486 11.4751 6.09736 11.2501 6.09736Z",fill:"#1B4F4A"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1153_3180",children:e.jsx("rect",{fill:"white",height:"12",transform:"translate(0 0.509766)",width:"12"})})})]}),S=({products:s,dealId:o,fetchDealDetailsByDealId:N})=>{var f,p;const{t:r}=H(),[l,h]=w.useState(s),u=I(),n=B(),[j,y]=w.useState(!1),[t,_]=w.useState(""),d=(a,i)=>{const g=l==null?void 0:l.map((c,M)=>{if(M===a){if(i==="increment")return{...c,quantity:c.quantity+1};if(i==="decrement"&&c.quantity>1)return{...c,quantity:c.quantity-1}}return c});h(g)},x=l==null?void 0:l.reduce((a,i)=>a+(i.max_retail_price-i.price)*i.quantity,0),v=async()=>{try{const a=await u(q({dealId:o,products:l})).unwrap(),i=a==null?void 0:a.order_id;n("/payment?orderId="+i+"&dealId="+o)}catch(a){y(!0),_((a==null?void 0:a.detail)||r("cart.errorMessage"))}};return e.jsxs("div",{className:"flex flex-col items-start gap-[15px] p-[15px] relative bg-whitewhite rounded-[5px]",children:[e.jsxs("div",{className:"flex items-center gap-2.5 self-stretch w-full relative flex-[0_0_auto]",children:[e.jsx(L,{className:"!relative !w-5 !h-5"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter-Bold',Helvetica] font-bold text-primary-color text-lg tracking-[0] leading-[26px] whitespace-nowrap",children:r("cart.myBasket")})]}),e.jsx(m,{}),j&&e.jsx(D,{message:t,buttonText:r("waiting_deal.got_it"),onClose:()=>y(!1)}),l==null?void 0:l.map((a,i)=>e.jsxs("div",{className:"items-start flex flex-col gap-[5px] relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx("div",{className:"flex items-center gap-2.5 self-stretch w-full relative flex-[0_0_auto]",children:e.jsx("p",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter-Regular',Helvetica] font-normal text-primary-color text-base tracking-[0] leading-6 whitespace-nowrap",children:a.name})}),e.jsx("div",{className:"flex items-center gap-2.5 self-stretch w-full relative flex-[0_0_auto]",children:e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter-Medium',Helvetica] font-medium text-orangeorange text-sm tracking-[0] leading-[22px] whitespace-nowrap",children:r("cart.available",{count:a.availability})})}),e.jsx("div",{className:"flex items-end justify-between self-stretch w-full relative flex-[0_0_auto]",children:e.jsxs("div",{className:"flex w-full items-end justify-between relative self-stretch",children:[e.jsx("div",{className:"inline-flex flex-col items-start gap-2.5 relative flex-[0_0_auto]",children:e.jsx("div",{className:"relative w-[81.17px] h-[25px] mr-[-2.00px]",children:e.jsxs("div",{className:"relative w-[79px] h-[25px] bg-whitewhite rounded-[3.47px] border-[0.69px] border-solid border-stroke",children:[e.jsx("span",{className:"transition-transform transform hover:scale-95 active:scale-90",onClick:()=>d(i,"decrement"),children:e.jsx(V,{className:"!absolute !w-2 !h-2 !top-2 !left-[7px]"})}),e.jsx("div",{className:"absolute top-[3px] left-9 [font-family:'Inter-Medium',Helvetica] font-medium text-primary-color text-[11.1px] tracking-[0] leading-[16.7px] whitespace-nowrap",children:a.quantity}),e.jsx("span",{className:"transition-transform transform hover:scale-95 active:scale-90",onClick:()=>d(i,"increment"),children:e.jsx(X,{className:"!absolute !w-2 !h-2 !top-2 !left-[62px]"})})]})})}),e.jsxs("div",{className:"inline-flex items-center justify-center gap-2 relative flex-[0_0_auto]",children:[e.jsxs("div",{className:"mt-[-1.00px] [font-family:'Inter-Regular',Helvetica] font-normal text-primary-color leading-6 line-through relative w-fit text-sm text-right tracking-[0] whitespace-nowrap",children:[a.max_retail_price," €"]}),e.jsxs("div",{className:"[font-family:'Inter-SemiBold',Helvetica] font-semibold text-secondary-color leading-[22px] relative w-fit text-sm text-right tracking-[0] whitespace-nowrap",children:[a.price," €"]}),e.jsx("div",{className:"inline-flex items-center justify-center gap-px px-1.5 py-0 relative flex-[0_0_auto] bg-greengreen-dark rounded",children:e.jsxs("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter-Medium',Helvetica] font-medium text-whitewhite text-[10px] tracking-[0] leading-5 whitespace-nowrap",children:[a==null?void 0:a.discount,"%"]})})]})]})}),e.jsx(m,{})]},i)),e.jsxs("div",{className:"items-end flex flex-col gap-[5px] relative self-stretch w-full flex-[0_0_auto]",children:[e.jsxs("div",{className:"flex items-end justify-between self-stretch w-full relative flex-[0_0_auto]",children:[e.jsx("div",{className:"relative w-fit font-body-extra-small-text-regular font-[number:var(--body-extra-small-text-regular-font-weight)] text-primary-text-color text-xs text-center tracking-[0] leading-5 whitespace-nowrap",children:r("cart.totalTTC")}),e.jsxs("div",{className:"inline-flex items-start justify-end gap-2.5 relative flex-[0_0_auto]",children:[e.jsxs("div",{className:"mt-[-1.00px] [font-family:'Inter-Regular',Helvetica] font-normal text-primary-text-color leading-6 line-through relative w-fit text-sm text-right tracking-[0] whitespace-nowrap",children:[(f=l==null?void 0:l.reduce((a,i)=>a+i.max_retail_price*i.quantity,0))==null?void 0:f.toFixed(2)," ","€"]}),e.jsxs("div",{className:"mt-[-1.00px] [font-family:'Inter-SemiBold',Helvetica] font-semibold text-primary-color leading-[22px] relative w-fit text-sm text-right tracking-[0] whitespace-nowrap",children:[(p=l==null?void 0:l.reduce((a,i)=>a+i.price*i.quantity,0))==null?void 0:p.toFixed(2)," ","€"]})]})]}),e.jsxs("div",{className:"flex items-end justify-between self-stretch w-full relative flex-[0_0_auto]",children:[e.jsx("div",{className:"relative w-fit font-body-extra-small-text-regular text-secondary-color text-xs text-center tracking-[0] leading-5 whitespace-nowrap",children:r("cart.save")}),e.jsxs("div",{className:"mt-[-1.00px] font-body-small-medium text-secondary-color leading-6 relative w-fit text-xs text-right tracking-[0] whitespace-nowrap",children:[x==null?void 0:x.toFixed(2)," €"]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2.5 px-6 py-3 relative self-stretch w-full flex-[0_0_auto] bg-primary-color rounded-md transition-transform transform hover:scale-95 active:scale-90",onClick:v,children:[e.jsx(K,{className:"!relative !w-5 !h-5"}),e.jsx("button",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] [font-family:'Inter-Medium',Helvetica] font-medium text-whitewhite text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:r("cart.payment")})]})]})},ne=()=>{var d,x,v,f,p,a,i,g;const{t:s}=H(),o=B(),N=A(),r=I(),l=new URLSearchParams(N.search),h=l.get("deal_id"),u=l.get("is_creator"),{deal:n,status:j,error:y}=Z(c=>c.deals),t=((d=n==null?void 0:n.Deal)==null?void 0:d.deal)&&((x=n==null?void 0:n.Deal)==null?void 0:x.deal)||{};if(w.useEffect(()=>{r(b(h))},[]),j==="loading")return e.jsx(F,{});const _=()=>{o("/")};return console.log({dealState:t}),e.jsx("div",{className:"flex flex-col w-full items-start relative bg-primary-background",children:e.jsxs("div",{className:"flex flex-col w-full items-start gap-[15px] px-[35px] py-[15px] relative flex-[0_0_auto]",children:[e.jsx("div",{className:"flex items-center gap-3 pt-0 pb-5 px-0 relative self-stretch w-full flex-[0_0_auto] border-b [border-bottom-style:solid] border-stroke",children:e.jsxs("div",{className:"inline-flex items-center gap-2 relative flex-[0_0_auto] cursor-pointer",onClick:_,children:[e.jsx(z,{className:"!relative !w-[18px] !h-[18px]",color:"#637381"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-primary-text-color text-base tracking-[0] leading-6 whitespace-nowrap",children:s("common.back")})]})}),u&&e.jsxs("div",{className:"flex items-start gap-[15px] relative self-stretch w-full flex-[0_0_auto]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-6 py-3 relative flex-1 grow bg-whitewhite rounded-md shadow-shadow-1",children:[e.jsx(O,{className:"!relative !w-5 !h-5 !ml-[-7.25px]"}),e.jsx("button",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] mr-[-7.25px] [font-family:'Inter',Helvetica] font-medium text-primary-color text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:s("admin.modify")})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-6 py-3 relative flex-1 grow bg-whitewhite rounded-md shadow-shadow-1",children:[e.jsx(W,{className:"!relative !w-5 !h-5"}),e.jsx("button",{className:"all-[unset] box-border text-primary-color relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:s("admin.invite")})]})]}),e.jsx(E,{pictures:(t==null?void 0:t.deal_images)||[T]}),e.jsx("div",{className:"relative self-stretch [font-family:'Inter',Helvetica] font-semibold text-primary-color text-2xl tracking-[0] leading-[30px]",children:(t==null?void 0:t.title)||s("admin.wine_crates")}),(t==null?void 0:t.progress)!=="0%"&&((t==null?void 0:t.status)==="soon_out_stock"?e.jsx(Q,{percentage:t==null?void 0:t.progress}):e.jsx(J,{percentage:t==null?void 0:t.progress})),e.jsxs("div",{className:"flex items-start gap-[15px] relative self-stretch w-full flex-[0_0_auto]",children:[e.jsxs("div",{className:"inline-flex items-center gap-2.5 relative flex-[0_0_auto]",children:[e.jsx(C,{className:"!relative !w-5 !h-5",color:"#1B4F4A"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm tracking-[0] leading-[22px] whitespace-nowrap",children:s("active_deal.endsIn",{days:t==null?void 0:t.ends_in})})]}),e.jsxs("div",{className:"inline-flex items-center gap-2.5 relative flex-[0_0_auto]",children:[e.jsx(Y,{className:"!relative !w-5 !h-5"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm tracking-[0] leading-[22px] whitespace-nowrap",children:s("admin.participants",{count:t==null?void 0:t.participants})})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5 relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx(R,{className:"!relative !w-5 !h-5"}),e.jsx("p",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-color text-sm tracking-[0] leading-[22px]",children:t==null?void 0:t.location})]}),e.jsx(m,{}),e.jsxs("div",{className:"inline-flex items-center gap-[15px] relative flex-[0_0_auto] rounded-md",children:[((v=t==null?void 0:t.organizer)==null?void 0:v.organiser_image)&&e.jsx("img",{className:"relative w-[50px] h-[50px] object-cover rounded-md",alt:"Organizer",src:(f=t==null?void 0:t.organizer)==null?void 0:f.organiser_image}),!((p=t==null?void 0:t.organizer)!=null&&p.organiser_image)&&e.jsx(U,{}),e.jsxs("div",{className:"inline-flex flex-col items-start relative flex-[0_0_auto]",children:[e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm tracking-[0] leading-[22px] whitespace-nowrap",children:s("admin.collection_organized_by")}),e.jsx("div",{className:"relative w-fit [font-family:'Inter',Helvetica] font-medium text-primary-color text-base tracking-[0] leading-6 whitespace-nowrap",children:(a=t==null?void 0:t.organizer)==null?void 0:a.name}),e.jsx("div",{className:"inline-flex h-5 items-center gap-2.5 relative",children:e.jsx($,{className:"!flex-[0_0_auto]",rating:"four-star",size:"small"})})]})]}),e.jsx("div",{className:"relative self-stretch [font-family:'Inter',Helvetica] font-bold text-primary-color text-lg tracking-[0] leading-[26px]",children:s("admin.about_the_deal")}),e.jsxs("p",{className:"[font-family:'Inter',Helvetica] font-normal text-primary-text-color text-base tracking-[0] leading-6 relative self-stretch",children:[e.jsx("span",{className:"[font-family:'Inter',Helvetica] font-normal text-[#637381] text-base tracking-[0] leading-6",children:t==null?void 0:t.description}),e.jsx("span",{className:"font-bold underline",children:s("common.read_more")})]}),e.jsx(m,{}),e.jsxs("div",{className:"flex items-center gap-2.5 relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx(k,{className:"!relative !w-5 !h-5"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-bold text-primary-color text-lg tracking-[0] leading-[26px] whitespace-nowrap",children:s("admin.what_you_receive")})]}),e.jsxs("p",{className:"[font-family:'Inter',Helvetica] font-normal text-primary-text-color text-base tracking-[0] leading-6 relative self-stretch",children:[e.jsxs("span",{className:"[font-family:'Inter',Helvetica] font-normal text-[#637381] text-base tracking-[0] leading-6",children:[s("admin.bulk_order_includes")," "]}),e.jsx("span",{className:"font-bold underline",children:s("common.read_more")})]}),e.jsx(m,{}),e.jsxs("div",{className:"flex items-center gap-2.5 relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx(k,{className:"!relative !w-5 !h-5"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-bold text-primary-color text-lg tracking-[0] leading-[26px] whitespace-nowrap",children:s("admin.delivery_location_and_date")})]}),e.jsxs("div",{className:"flex items-center gap-2.5 relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx(C,{className:"!relative !w-5 !h-5",color:"#1B4F4A"}),e.jsx("p",{className:"relative flex-1 mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-color text-base tracking-[0] leading-6",children:(i=t==null?void 0:t.collection_info)==null?void 0:i.date})]}),e.jsxs("div",{className:"flex items-start gap-2.5 relative self-stretch w-full flex-[0_0_auto]",children:[e.jsx(G,{className:"!relative !w-5 !h-5",color:"#1B4F4A"}),e.jsx("p",{className:"relative flex-1 mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-color text-base tracking-[0] leading-6",children:(g=t==null?void 0:t.collection_info)==null?void 0:g.location})]}),e.jsx(m,{}),e.jsx(S,{products:t==null?void 0:t.products,dealId:h,fetchDealDetailsByDealId:b})]})})};export{ne as default};
