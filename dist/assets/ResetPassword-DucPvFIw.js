import{r as a,u as j,c as P,g as N,a as S,j as s,B as _,$ as k}from"./index--2_inFgc.js";import{E as C}from"./EyeAlt4-DHwKJVFy.js";import{S as m}from"./sweetalert2.all-7LciGaM8.js";import E from"./CustomLoader-DEIokDHT.js";const p=({value:t,onChange:n,placeholder:r,showPassword:i,togglePasswordVisibility:l})=>s.jsx("div",{className:"flex flex-col h-12 items-start gap-[5px] relative self-stretch w-full",children:s.jsx("div",{className:"flex flex-col items-start gap-2.5 relative flex-1 self-stretch w-full grow",children:s.jsx("div",{className:"flex items-center gap-2.5 pl-5 pr-4 py-3 relative flex-1 self-stretch w-full grow bg-whitewhite rounded-md border border-solid border-stroke",children:s.jsxs("div",{className:"flex items-center justify-between relative flex-1 grow",children:[s.jsx("input",{type:i?"text":"password",value:t,onChange:n,placeholder:r,className:"flex-1 bg-transparent border-none outline-none"}),s.jsx("div",{onClick:l,children:s.jsx(C,{className:"!relative !cursor-pointer !w-4 !h-4"})})]})})})}),$=()=>{const[t,n]=a.useState(""),[r,i]=a.useState(""),[l,h]=a.useState(!1),[g,x]=a.useState(""),[d,u]=a.useState(!1),w=j(),v=P();N(e=>e.user);const{t:o,i18n:T}=S();a.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("email");e&&x(e)},[]);const f=()=>h(!l),y=()=>{const e=[];return t.length<8&&e.push("Password must be at least 8 characters long."),/[A-Z]/.test(t)||e.push("Password must contain at least one uppercase letter."),/[a-z]/.test(t)||e.push("Password must contain at least one lowercase letter."),/[0-9]/.test(t)||e.push("Password must contain at least one digit."),t!==r&&e.push("Passwords do not match."),e.length>0?(m.fire({title:"Password Validation Failed",html:`<ul style="text-align: left;">${e.map(c=>`<li style="margin-bottom: 8px;">${c}</li>`).join("")}</ul>`,icon:"error",confirmButtonText:"OK"}),!1):!0},b=async()=>{if(y()){u(!0);try{await v(k({email:g,password:t,confirmPassword:r})).unwrap(),w("/reset-password-success")}catch(e){console.log({err:e}),m.fire({title:"Error",text:e==null?void 0:e.detail,icon:"error",confirmButtonText:"OK"})}finally{u(!1)}}};return s.jsxs("div",{className:"relative w-full h-screen bg-primary-background",children:[d&&s.jsx(E,{})," ",!d&&s.jsxs("div",{className:"flex flex-col w-[360px] items-start gap-[15px] px-[35px] py-[15px] absolute left-0",children:[s.jsx("div",{className:"relative w-fit mt-[-1.00px] font-heading-6 font-[number:var(--heading-6-font-weight)] text-primary-color text-[length:var(--heading-6-font-size)] text-center tracking-[var(--heading-6-letter-spacing)] leading-[var(--heading-6-line-height)] whitespace-nowrap [font-style:var(--heading-6-font-style)]",children:"New Password"}),s.jsx("p",{className:"relative self-stretch [font-family:'Inter',Helvetica] font-normal text-primary-color text-sm tracking-[0] leading-[22px]",children:"The password must be long enough and difficult for others to guess."}),s.jsx(p,{value:t,onChange:e=>n(e.target.value),placeholder:"Enter your new password",showPassword:l,togglePasswordVisibility:f}),s.jsx(p,{value:r,onChange:e=>i(e.target.value),placeholder:"Confirm your new password",showPassword:l,togglePasswordVisibility:f}),s.jsx("div",{className:"flex flex-wrap text-[#637381] text-sm gap-x-4 gap-y-2 mt-2",children:[o("signup.password_hints.min_length"),o("signup.password_hints.uppercase_lowercase"),o("signup.password_hints.special_character"),o("signup.password_hints.number")].map((e,c)=>s.jsxs("div",{className:"relative w-fit font-body-small-regular font-[number:var(--body-small-regular-font-weight)] text-primary-text-color text-[length:var(--body-small-regular-font-size)] text-center tracking-[var(--body-small-regular-letter-spacing)] leading-[var(--body-small-regular-line-height)] whitespace-nowrap [font-style:var(--body-small-regular-font-style)]",children:[s.jsx("span",{className:"mr-1",children:"â€¢"})," ",e]},c))}),s.jsx("div",{onClick:b,className:"w-full",children:s.jsx(_,{buttonText:"Change Password",className:"!self-stretch !flex-[0_0_auto] !flex !w-full",color:"primary",kind:"primary",round:"semi-round",state:"default"})})]})]})};export{$ as default};
