import{r as a,u as j,c as N,g as P,j as e,B as b,$ as k}from"./index-B0WL61aP.js";import{E as S}from"./EyeAlt4-FFs2sTkS.js";import{S as x}from"./sweetalert2.all-DEXiqHiS.js";import C from"./CustomLoader-C8eQf-Ao.js";const m=({value:s,onChange:i,placeholder:r,showPassword:o,togglePasswordVisibility:l})=>e.jsx("div",{className:"flex flex-col h-12 items-start gap-[5px] relative self-stretch w-full",children:e.jsx("div",{className:"flex flex-col items-start gap-2.5 relative flex-1 self-stretch w-full grow",children:e.jsx("div",{className:"flex items-center gap-2.5 pl-5 pr-4 py-3 relative flex-1 self-stretch w-full grow bg-whitewhite rounded-md border border-solid border-stroke",children:e.jsxs("div",{className:"flex items-center justify-between relative flex-1 grow",children:[e.jsx("input",{type:o?"text":"password",value:s,onChange:i,placeholder:r,className:"flex-1 bg-transparent border-none outline-none"}),e.jsx("div",{onClick:l,children:e.jsx(S,{className:"!relative !cursor-pointer !w-4 !h-4"})})]})})})}),R=()=>{const[s,i]=a.useState(""),[r,o]=a.useState(""),[l,f]=a.useState(!1),[p,h]=a.useState(""),[n,c]=a.useState(!1),u=j(),w=N();P(t=>t.user),a.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("email");t&&h(t)},[]);const d=()=>f(!l),g=()=>{const t=[];return s.length<8&&t.push("Password must be at least 8 characters long."),/[A-Z]/.test(s)||t.push("Password must contain at least one uppercase letter."),/[a-z]/.test(s)||t.push("Password must contain at least one lowercase letter."),/[0-9]/.test(s)||t.push("Password must contain at least one digit."),s!==r&&t.push("Passwords do not match."),t.length>0?(x.fire({title:"Password Validation Failed",html:`<ul style="text-align: left;">${t.map(y=>`<li style="margin-bottom: 8px;">${y}</li>`).join("")}</ul>`,icon:"error",confirmButtonText:"OK"}),!1):!0},v=async()=>{if(g()){c(!0);try{await w(k({email:p,password:s,confirmPassword:r})).unwrap(),u("/reset-password-success")}catch(t){console.log({err:t}),x.fire({title:"Error",text:t==null?void 0:t.detail,icon:"error",confirmButtonText:"OK"})}finally{c(!1)}}};return e.jsxs("div",{className:"relative w-full h-screen bg-primary-background",children:[n&&e.jsx(C,{})," ",!n&&e.jsxs("div",{className:"flex flex-col w-[360px] items-start gap-[15px] px-[35px] py-[15px] absolute left-0",children:[e.jsx("div",{className:"relative w-fit mt-[-1.00px] font-heading-6 font-[number:var(--heading-6-font-weight)] text-primary-color text-[length:var(--heading-6-font-size)] text-center tracking-[var(--heading-6-letter-spacing)] leading-[var(--heading-6-line-height)] whitespace-nowrap [font-style:var(--heading-6-font-style)]",children:"Reset Password"}),e.jsx("p",{className:"relative self-stretch [font-family:'Inter',Helvetica] font-normal text-primary-color text-sm tracking-[0] leading-[22px]",children:"The password must be long enough and difficult for others to guess."}),e.jsx(m,{value:s,onChange:t=>i(t.target.value),placeholder:"Enter your new password",showPassword:l,togglePasswordVisibility:d}),e.jsx(m,{value:r,onChange:t=>o(t.target.value),placeholder:"Confirm your new password",showPassword:l,togglePasswordVisibility:d}),e.jsxs("div",{className:"relative w-[280px] h-[49px]",children:[e.jsxs("div",{className:"flex w-[280px] items-center gap-[15px] absolute top-0 left-0",children:[e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm text-center tracking-[0] leading-[22px] whitespace-nowrap",children:"8 characters minimum"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm text-center tracking-[0] leading-[22px] whitespace-nowrap",children:"1 capital letter"})]}),e.jsxs("div",{className:"flex w-[280px] items-center gap-[21px] absolute top-[27px] left-0",children:[e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm text-center tracking-[0] leading-[22px] whitespace-nowrap",children:"1 lowercase letter"}),e.jsx("div",{className:"relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-normal text-primary-text-color text-sm text-center tracking-[0] leading-[22px] whitespace-nowrap",children:"1 digit"})]})]}),e.jsx("div",{onClick:v,className:"w-full",children:e.jsx(b,{buttonText:"Change Password",className:"!self-stretch !flex-[0_0_auto] !flex !w-full",color:"primary",kind:"primary",round:"semi-round",state:"default"})})]})]})};export{R as default};
