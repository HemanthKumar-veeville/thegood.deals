import{q as b,s as j,r as n,a as u,j as e,L as k,v as S,k as E,E as I,w as N,u as _}from"./index-YT0X1fr2.js";import{L as p}from"./line-63-BwS0eOFc.js";function P({heading:i,btnText:o}){const l=b(),t=j(),[a,r]=n.useState(null),[x,s]=n.useState(!1),[y,h]=n.useState("avisihks@gmail.com"),{t:g}=u(),f=async m=>{if(m.preventDefault(),!(!l||!t)){s(!0);try{const{setupIntent:d,error:c}=await l.confirmSetup({elements:t,confirmParams:{},redirect:"if_required"});c?(c.type==="card_error"||c.type==="validation_error"?r(c.message):r("An unexpected error occurred."),console.error("Error during setup confirmation:",c)):(console.log("SetupIntent confirmed:",d),r("Setup confirmed successfully."))}catch(d){console.error("Error in setup confirmation:",d),r("An error occurred during setup confirmation.")}finally{s(!1)}}},v={layout:{type:"accordion",defaultCollapsed:!1,radios:!1,spacedAccordionItems:!0},appearance:{theme:"flat",variables:{colorPrimaryText:"#262626",colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#df1b41",fontFamily:"Ideal Sans, system-ui, sans-serif",spacingUnit:"2px",borderRadius:"4px"},rules:{".Label":{display:"none"}}}},w={defaultValues:{email:y},appearance:{theme:"flat",variables:{colorPrimaryText:"#262626",colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#df1b41",fontFamily:"Ideal Sans, system-ui, sans-serif"},rules:{".Label":{display:"none"}}}};return e.jsxs("form",{id:"payment-form",onSubmit:f,className:"mx-auto",children:[e.jsx(k,{id:"link-authentication-element",onChange:m=>{h(m.value.email)},options:w}),e.jsx(S,{id:"payment-element",options:v}),a&&e.jsx("div",{id:"payment-message",children:a}),e.jsx("img",{className:"relative self-stretch w-full h-px object-cover",alt:g("withdrawal.line_alt"),src:p}),e.jsxs("div",{className:"flex items-center justify-center gap-2.5 px-6 py-3 relative self-stretch w-full flex-[0_0_auto] bg-primary-color rounded-md cursor-pointer",onClick:f,children:[e.jsx("button",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-white text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:o}),e.jsx(E,{className:"!relative !w-5 !h-5",color:"white"})]})]})}function L({heading:i,btnText:o,...l}){const{stripePromise:t}=l,[a,r]=n.useState("");return n.useEffect(()=>{(async()=>{try{const{data:s}=await N.post("http://localhost:5000/payments/create-setup-intent");console.log(s),r(s.clientSecret)}catch(s){console.error("Error creating PaymentIntent:",s)}})()},[]),e.jsx(e.Fragment,{children:a&&t&&e.jsx(I,{stripe:t,options:{clientSecret:a},children:e.jsx(P,{heading:i,btnText:o})})})}const T=({heading:i,btnText:o,stripePromise:l})=>{n.useState(!1);const t=_(),{t:a}=u(),r=()=>{t(o==="Validate payment"?"/admin-view-deal":"/admin-wallet")};return n.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx("div",{className:"flex flex-col w-full h-full items-start relative bg-primary-background mx-auto",children:e.jsxs("div",{className:"flex flex-col w-full items-start gap-[15px] px-[35px] py-[15px] relative flex-[0_0_auto]",children:[e.jsx("div",{className:"relative self-stretch mt-[-1.00px] [font-family:'Inter',Helvetica] font-semibold text-primary-color text-2xl tracking-[0] leading-[30px]",children:i}),e.jsx(L,{stripePromise:l,heading:i,btnText:o}),e.jsx("img",{className:"relative self-stretch w-full h-px object-cover",alt:a("withdrawal.line_alt"),src:p}),e.jsx("button",{className:"all-[unset] box-border flex items-center justify-center gap-2 px-6 py-3 relative self-stretch w-full flex-[0_0_auto] rounded-md border border-solid border-primary-color cursor-pointer",onClick:r,children:e.jsx("div",{className:"all-[unset] box-border relative w-fit mt-[-1.00px] [font-family:'Inter',Helvetica] font-medium text-primary-color text-base text-center tracking-[0] leading-6 whitespace-nowrap",children:a("withdrawal.back_button")})})]})})};export{T as default};
