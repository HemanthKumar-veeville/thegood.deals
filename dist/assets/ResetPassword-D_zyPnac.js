import{r as p,u as b,c as v,a as j,aj as C,S as N,j as e,C as S,B as _}from"./index-CWmJuMKO.js";import{u as B,c as E,a as x,b as L}from"./index.esm-BWEu_DS9.js";import{E as V}from"./EyeAlt8-BAKxD1nu.js";const g=({id:l,name:a,type:d="text",placeholder:u,formik:r,label:i,showPassword:n=!1,toggleVisibility:c})=>e.jsxs("div",{className:"w-full flex flex-col items-start gap-2 relative",children:[i&&e.jsx("label",{htmlFor:l,className:"[font-family:'Inter',Helvetica] font-medium text-[#1b4f4a] text-sm leading-[22px] mb-[2px] w-full",children:i}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:`flex items-center gap-2.5 pl-5 pr-4 py-3 w-full bg-white rounded-md border cursor-pointer hover:bg-gray-100 ${r.touched[a]&&r.errors[a]?"border-red-500 border-solid":"focus-within:ring-1 focus-within:ring-[#1b4f4a] border"}`,children:[e.jsx("input",{id:l,name:a,type:n?"text":d,placeholder:u,onChange:r.handleChange,onBlur:r.handleBlur,value:r.values[a],className:"flex-1 bg-transparent outline-none",autoComplete:"off"}),c&&e.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center !relative !w-4 !h-4 hover:text-primary cursor-pointer","aria-label":n?t("resetPassword.hide_password"):t("resetPassword.show_password"),children:e.jsx(V,{})})]}),r.touched[a]&&r.errors[a]&&e.jsx("div",{className:"text-red-500 text-sm mt-2",children:r.errors[a]})]})]}),I=()=>{const[l,a]=p.useState(!1),[d,u]=p.useState(!1),[r,i]=p.useState(!1),n=b(),c=v(),{t:s}=j();p.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("email");o&&w.setFieldValue("email",o)},[]);const w=B({initialValues:{password:"",confirmPassword:"",email:""},validationSchema:E({password:x().min(8,s("resetPassword.passwordCriteria.8characters")).matches(/[a-z]/,s("resetPassword.passwordCriteria.1lowerCase")).matches(/[A-Z]/,s("resetPassword.passwordCriteria.1capitalLetter")).matches(/\d/,s("resetPassword.passwordCriteria.1digit")).matches(/[~#@$%&!*_?^-]/,s("resetPassword.passwordCriteria.special_character")).required(s("resetPassword.errors.password")),confirmPassword:x().oneOf([L("password"),null],s("resetPassword.errors.confirm_password")).required(s("resetPassword.errors.confirm_password"))}),onSubmit:async o=>{var m,h;i(!0);try{await c(C(o)).unwrap(),n("/reset-password-success")}catch(f){N.fire({title:s("resetPassword.errors.error_title"),text:((h=(m=f==null?void 0:f.response)==null?void 0:m.data)==null?void 0:h.detail)||s("resetPassword.errors.generic_error"),icon:"error",confirmButtonText:s("resetPassword.errors.confirm")})}finally{i(!1)}}}),y=()=>{a(!l)},P=()=>{u(!d)};return e.jsxs("div",{className:"relative w-full h-screen bg-primary-background",children:[r&&e.jsx(S,{}),!r&&e.jsxs("div",{className:"flex flex-col w-[360px] items-start gap-[15px] px-[35px] py-[15px] absolute left-0",children:[e.jsx("div",{className:"relative w-fit font-heading-6 font-semibold text-primary-color text-[length:var(--heading-6-font-size)] text-center",children:s("resetPassword.newPassword")}),e.jsx("p",{className:"font-body-small-regular font-[number:var(--body-small-regular-font-weight)] text-primary-color text-[length:var(--body-small-regular-font-size)] tracking-[var(--body-small-regular-letter-spacing)] leading-[var(--body-small-regular-line-height)] [font-style:var(--body-small-regular-font-style)]",children:s("resetPassword.passwordInstruction")}),e.jsxs("form",{onSubmit:w.handleSubmit,className:"w-full space-y-5",children:[e.jsx(g,{id:"password",name:"password",type:"password",placeholder:s("resetPassword.passwordPlaceholder"),formik:w,showPassword:l,toggleVisibility:y}),e.jsx(g,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:s("resetPassword.confirmPasswordPlaceholder"),formik:w,showPassword:d,toggleVisibility:P}),e.jsx("div",{className:"flex flex-wrap text-[#637381] text-sm gap-x-4 gap-y-2 mt-2",children:[s("resetPassword.passwordCriteria.8characters"),s("resetPassword.passwordCriteria.1capitalLetter"),s("resetPassword.passwordCriteria.1lowerCase"),s("resetPassword.passwordCriteria.special_character"),s("resetPassword.passwordCriteria.1digit")].map((o,m)=>e.jsxs("div",{className:"font-body-small-regular font-[number:var(--body-small-regular-font-weight)] text-primary-text-color text-[length:var(--body-small-regular-font-size)] text-center tracking-[var(--body-small-regular-letter-spacing)] leading-[var(--body-small-regular-line-height)] whitespace-nowrap [font-style:var(--body-small-regular-font-style)]",children:[e.jsx("span",{className:"mr-1",children:"â€¢"})," ",o]},m))}),e.jsx(_,{buttonText:s("resetPassword.changePasswordButton"),className:"!self-stretch !flex-[0_0_auto] !flex !w-full",color:"primary",kind:"primary",round:"semi-round",state:"default",type:"submit"})]})]})]})};export{I as default};
